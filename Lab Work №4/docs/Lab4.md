# Лабораторная работа №4
**Тема:** Проектирование REST API
 
**Цель работы:** Получить опыт проектирования программного интерфейса.
## Документация по API
### Аутентификация и авторизация
1. Аутентификация пользователя
   - **Метод:** POST
   - **URL:** /api/authenticate
   - **Описание:** Аутентификация пользователя по логину и паролю.
   - **Параметры запроса:**
     - username (string): Логин пользователя
     - password (string): Пароль пользователя.
   - **Ответ:** token (string): Токен аутентификации для последующих запросов.
 
### Учетные записи пользователей
1. Создание учетной записи пользователя
   - **Метод:** POST
   - **URL:** /api/users
   - **Описание:** Создание новой учетной записи пользователя.
   - **Параметры запроса:**
     - username (string): Логин пользователя
     - password (string): Пароль пользователя.
     - role (string): Роль пользователя (подрядчик или представитель УСК).
  
2. Удаление учетной записи пользователя
   - **Метод:** DELETE
   - **URL:** /api/users/{user_id}
   - **Описание:** Удаление учетной записи пользователя.
   - **Параметры запроса:**
     - user_id (integer): Идентификатор пользователя, чью учетную запись требуется удалить.
   - **Ответ:** Код состояния HTTP 204 No Content в случае успешного удаления.
 
 ### Обработка нарушений    
 1. Добавление информации о нарушении
    - **Метод:** POST
    - **URL:** /api/violations
    - **Описание:**  Представитель УСК добавляет информацию о нарушении.
    - **Заголовок запроса:** Authorization (string): Bearer токен.
    - **Параметры запроса:**
      - description (string): Описание нарушения.
      - photo (string): Ссылка на фото нарушения.
      - property_id (integer): Идентификатор объекта недвижимости.
    - **Ответ:**
 2. Назначение ответственного подрядчика
    - **Метод:** PUT
    - **URL:** /api/violations/{violation_id}/assign-contractor
    - **Описание:**  Представитель УСК назначает ответственного подрядчика для нарушения.
    - **Заголовок запроса:** Authorization (string): Bearer токен.
    - **Параметры запроса:**
      - description (string): Описание нарушения.
    - **Ответ:**
3.  Отмена назначения ответственного подрядчика
    - **Метод:** DELETE
    - **URL:** /api/violations/{violation_id}/cancel-assignment
    - **Описание:**  Отмена назначения ответственного подрядчика для нарушения.
    - **Заголовок запроса:** Authorization (string): Bearer токен.
    - **Параметры запроса:**
      - violation_id (integer): Идентификатор нарушения, для которого отменяется назначение подрядчика.
    - **Ответ:** Код состояния HTTP 204 No Content в случае успешного удаления.
### Устранение нарушений подрядчиками
1. Получение списка нарушений для подрядчика
    - **Метод:** GET
    - **URL:** /api/contractors/{contractor_id}/violations
    - **Описание:**  Получение списка нарушений, назначенных подрядчику.
    - **Заголовок запроса:** Authorization (string): Bearer токен.
    - **Параметры запроса:**
      - description (string): Описание нарушения.
      - photo (string): Ссылка на фото нарушения.
      - property_id (integer): Идентификатор объекта недвижимости.
    - **Ответ:** violations (array): Массив объектов с информацией о нарушениях.
 2. Отмена завершения задачи по устранению нарушения
    - **Метод:** PUT
    - **URL:** /api/contractors/{contractor_id}/violations/{violation_id}/complete
    - **Описание:**  Подрядчик завершает задачу по устранению нарушения.
    - **Заголовок запроса:** Authorization (string): Bearer токен.
    - **Ответ:**
3.  Отмена назначения ответственного подрядчика
    - **Метод:** DELETE
    - **URL:** URL: /api/contractors/{contractor_id}/violations/{violation_id}/cancel-completion
    - **Описание:**  Отмена завершения задачи по устранению нарушения подрядчиком.
    - **Заголовок запроса:** Authorization (string): Bearer токен.
    - **Параметры запроса:**
      - contractor_id (integer): Идентификатор подрядчика.
      - violation_id (integer): Идентификатор нарушения, для которого отменяется завершение задачи.
    - **Ответ:** Код состояния HTTP 204 No Content в случае успешной отмены.
### Отчетность
1. Генерация отчета
    - **Метод:** GET
    - **URL:** /api/reports
    - **Описание:**  Генерация отчета о количестве устраненных и неустраненных нарушений и сроках устранения.
    - **Заголовок запроса:** Authorization (string): Bearer токен.
    - **Ответ:** report (object): Объект с информацией о количестве устраненных и неустраненных нарушений.

